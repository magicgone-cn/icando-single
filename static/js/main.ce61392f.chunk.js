(this["webpackJsonpicando-single"]=this["webpackJsonpicando-single"]||[]).push([[0],{160:function(e,t,n){e.exports=n(317)},165:function(e,t,n){},167:function(e,t,n){},304:function(e,t,n){},317:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),i=n.n(o),c=(n(165),n(166),n(167),n(24)),l=n(32),s=n(44),u=n(42),d=n(45),h=n(324),p=n(326),m=n(321),f=n(47),y=n(325),v=n(318),b=n(319),E=n(322),g=n(320),j=n(123),x=n(155),k="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),O=function e(){Object(c.a)(this,e)};O.uuid=function(e,t){var n,a,r=k,o=[];if(t=t||r.length,e)for(n=0;n<e;n++)o[n]=r[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",n=0;n<36;n++)o[n]||(a=0|16*Math.random(),o[n]=r[19===n?3&a|8:a]);return o.join("")},O.uuidFast=function(){for(var e,t=k,n=new Array(36),a=0,r=0;r<36;r++)8===r||13===r||18===r||23===r?n[r]="-":14===r?n[r]="4":(a<=2&&(a=33554432+16777216*Math.random()|0),e=15&a,a>>=4,n[r]=t[19===r?3&e|8:e]);return n.join("")},O.uuidCompact=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))};var C=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"isEmpty",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return!(!t&&null===e)&&(!(!n&&void 0===e)&&(null===e||void 0===e||0===Object.keys(e).length))}}]),e}(),w={root:Symbol.for("rootNode"),normal:Symbol.for("normalNode"),leaf:Symbol.for("leafNode")},S=function e(t){Object(c.a)(this,e),this.id="",this.title="",this.description="",this.completed=!1,this.children=null,this.parent=null,this.type=w.normal,this.id=O.uuid(),this.title=t},I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this,"root node"))).type=w.root,e.children=[],e}return Object(d.a)(t,e),t}(S);function M(e){return e.children.forEach((function(t){t.parent=e})),e}var N=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"clone",value:function(e){switch(e.type){case w.root:return Object.assign(new I,e);default:return Object.assign(new S,e)}}},{key:"append",value:function(t,n){var a=e.clone(t);return a.children?a.children=[].concat(Object(x.a)(a.children),[n]):a.children=[n],M(a),a}},{key:"update",value:function(t,n){var a=e.clone(t);return a.children=t.children.map((function(e){return e.id===n.id?n:e})),C.isEmpty(n.children)||n.children.forEach((function(e){e.parent=n})),M(a),a}},{key:"delete",value:function(t,n){var a=e.clone(t);return a.children=t.children.filter((function(e){return e.id!==n.id})),M(a),a}},{key:"refreshNode",value:function(t,n){for(var a=n;;){var r=a.parent;if(r===t)break;if(r.type===w.root)throw new Error("\u65e0\u6548\u7684\u7236\u8282\u70b9");a=r}if(n.parent===t)return e.update(n.parent,n);var o=e.update(n.parent,n);return e.refreshNode(t,o)}},{key:"convertToJson",value:function(e){var t=function e(t){t.parent;var n=t.children,a=t.type,r=Object(j.a)(t,["parent","children","type"]);r.type=Symbol.keyFor(a),r.children=n?n.map((function(t){return e(t)})):null;return r}(e);return JSON.stringify(t)}},{key:"createFromJson",value:function(e){return function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t.type,o=t.children,i=Object(j.a)(t,["type","children"]);switch(Symbol.for(r)){case w.root:n=new I;break;default:n=new S}Object.assign(n,i),n.type=Symbol.for(r),n.children=o?o.map((function(t){return e(t,n)})):null;return n.parent=a,n}(JSON.parse(e))}}]),e}();var T=n(157),F=n(323),A=n(327),J={insert:Symbol.for("insert"),update:Symbol.for("update"),delete:Symbol.for("delete")},D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields((function(e,t){if(!e){var a=Object(T.a)({},n.mission,{},t);n.props.onChange(a)}}))},n.mission=n.props.mission||new S(""),n.editType=n.props.mission?J.update:J.insert,n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.mission;return r.a.createElement(F.a,{onSubmit:this.handleSubmit},r.a.createElement(F.a.Item,{label:"\u4efb\u52a1ID"},e("id",{initialValue:t.id})(r.a.createElement(A.a,{readOnly:!0}))),r.a.createElement(F.a.Item,{label:"\u4efb\u52a1\u540d\u79f0"},e("title",{initialValue:t.title,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"}]})(r.a.createElement(A.a,null))),r.a.createElement(F.a.Item,{label:"\u4efb\u52a1\u8be6\u60c5"},e("description",{initialValue:t.description})(r.a.createElement(A.a,null))),r.a.createElement(F.a.Item,null,r.a.createElement(f.a,{type:"primary",htmlType:"submit",block:!0},function(e){switch(e){case J.update:return"\u4fee\u6539";case J.insert:return"\u65b0\u589e";default:return"\u4fdd\u5b58"}}(this.editType)),r.a.createElement(f.a,{type:"default",block:!0,onClick:this.props.onCancel},"\u53d6\u6d88")))}}]),t}(r.a.Component);var L=F.a.create()(D);L.propTypes=D.propTypes;var B=L,R=(n(304),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={showCompleted:!1},n.openEditor=function(e){var t=new Promise((function(t){var n=h.a.info({icon:null,okButtonProps:{style:{display:"none"}},content:r.a.createElement(B,{mission:e,onChange:function(e){t(e),n.destroy()},onCancel:function(){n.destroy()}})})}));return{onChange:function(e){t.then((function(t){e(t)}))}}},n.refreshNode=function(e){var t=n.props.rootMission;e.type===w.root?n.props.onChange(e):n.props.onChange(N.refreshNode(t,e))},n.renderTreeNodes=function(e){if(e)return e.map((function(e){return r.a.createElement(p.a.TreeNode,{title:e.title,key:e.key},e.children&&n.renderTreeNodes(e.children))}))},n.handleMissionStatusChange=function(e){var t=e.target.checked,a=e.target["data-mission"];n.refreshNode(Object.assign(N.clone(a),{completed:t}))},n.renderMission=function(e){var t=n.state.showCompleted;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a.Item,{hidden:!t&&e.completed,className:"mission",actions:[r.a.createElement(f.a,{className:"btn-hidden",onClick:function(){n.handleEdit(e)}},"\u7f16\u8f91"),r.a.createElement(f.a,{className:"btn-hidden",onClick:function(){n.handleDelete(e)}},"\u5220\u9664"),r.a.createElement(f.a,{className:"btn-hidden",onClick:function(){n.handleAdd(e)}},"\u6dfb\u52a0")]},r.a.createElement(y.a,{checked:e.completed,onChange:n.handleMissionStatusChange,"data-mission":e,style:{marginRight:"20px"}}),r.a.createElement(m.a.Item.Meta,{title:e.title,description:e.description})),e.children&&Object.keys(e.children).length>0&&r.a.createElement(m.a,{style:{marginLeft:"20px"},dataSource:e.children,rowKey:function(e){return e.id},renderItem:function(e){return n.renderMission(e)}}))},n.handleEdit=function(e){n.openEditor(e).onChange((function(e){n.refreshNode(e)}))},n.handleDelete=function(e){n.refreshNode(N.delete(e.parent,e))},n.handleAdd=function(e){n.openEditor().onChange((function(t){n.refreshNode(N.append(e,t))}))},n.handleShowCompletedChange=function(e){n.setState({showCompleted:e})},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.rootMission.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{type:"flex",justify:"center"},r.a.createElement(b.a,{style:{textAlign:"center"}},r.a.createElement(E.a.Title,null,"I CAN DO"),r.a.createElement(g.a,{checkedChildren:"\u663e\u793a\u5df2\u5b8c\u6210",unCheckedChildren:"\u9690\u85cf\u5df2\u5b8c\u6210",checked:this.state.showCompleted,onChange:this.handleShowCompletedChange}))),r.a.createElement(v.a,{type:"flex",justify:"center",style:{minHeight:"50vh"}},r.a.createElement(b.a,{span:18},r.a.createElement(m.a,{dataSource:t,rowKey:function(e){return e.id},renderItem:function(t){return e.renderMission(t)}})),r.a.createElement(b.a,{span:10},r.a.createElement(f.a,{type:"primary",block:!0,onClick:function(){e.handleAdd(e.props.rootMission)}},"add mission"))),r.a.createElement(v.a,{type:"flex",justify:"center"},r.a.createElement(b.a,{span:4},r.a.createElement(f.a,{type:"default",block:!0,onClick:this.props.onSave},"save")),r.a.createElement(b.a,{span:4},r.a.createElement(f.a,{type:"default",block:!0,onClick:this.props.onExport},"export")),r.a.createElement(b.a,{span:4},r.a.createElement(f.a,{type:"default",block:!0,onClick:this.props.onImport},"import"))))}}]),t}(r.a.Component));var P,V=(P=R,function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={rootMission:new I},n.handleChange=function(e){n.setState({rootMission:e})},n.handleSave=function(){var e=N.convertToJson(n.state.rootMission);return localStorage.setItem("rootMission",e),Promise.resolve(e)},n.handleLoad=function(){var e=localStorage.getItem("rootMission");if(e){var t=N.createFromJson(e);n.setState({rootMission:t})}},n.handleExport=function(){n.handleSave().then((function(e){var t=new Blob([e],{type:"text/json"}),n=document.createElement("a");n.download="icando.json",n.href=window.URL.createObjectURL(t),n.dataset.downloadurl=["text/json",n.download,n.href].join(":"),n.click()}))},n.handleImportInit=function(){var e=document.createElement("input");e.type="file",e.accept=".json",e.addEventListener("change",(function(e){var t=e.path[0].files.item(0),a=new FileReader;a.onload=function(e){var t=e.target.result,a=N.createFromJson(t);n.setState({rootMission:a})},a.readAsText(t)})),n.importInput=e},n.handleImport=function(){n.importInput.click()},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.handleImportInit(),this.handleLoad()}},{key:"render",value:function(){var e=this.state.rootMission;return r.a.createElement(P,Object.assign({},this.props,{rootMission:e,onChange:this.handleChange,onSave:this.handleSave,onExport:this.handleExport,onImport:this.handleImport}))}}]),t}(r.a.Component));var K=function(){return r.a.createElement(V,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[160,1,2]]]);
//# sourceMappingURL=main.ce61392f.chunk.js.map