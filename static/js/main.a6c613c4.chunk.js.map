{"version":3,"sources":["utils/index.js","model/Mission.js","modules/MissionEditor.js","modules/TodoList.js","modules/Storage.js","App.js","serviceWorker.js","index.js"],"names":["CHARS","split","GuidUtil","uuid","len","radix","i","r","chars","length","Math","random","join","uuidFast","Array","rnd","uuidCompact","replace","c","toString","Util","obj","includeNull","includeUndefined","undefined","Object","keys","NodeType","root","Symbol","for","normal","leaf","Mission","title","id","description","completed","expanded","children","parent","type","this","RootMission","redirectParentPointer","parentNode","forEach","node","MissionFactory","mission","assign","targetParentNode","clone","map","isEmpty","item","filter","pointer","tempParentNode","Error","update","tempNode","refreshNode","data","convertMissionToData","keyFor","JSON","stringify","json","convertDataToMission","missionData","parse","extraInfo","completedKeys","Set","expandedKeys","add","parseExtraInfo","key","EditType","insert","delete","MissionEditor","props","handleSubmit","event","preventDefault","form","validateFields","errors","values","onChange","editType","getFieldDecorator","onSubmit","Item","label","initialValue","readOnly","rules","required","message","htmlType","block","formatButtonText","onClick","onCancel","React","Component","WrappedMissionEditor","Form","create","propTypes","TodoList","state","showCompleted","openEditor","promise","Promise","resolve","modal","Modal","info","icon","okButtonProps","style","display","content","destroy","callback","then","rootNode","rootMission","handleCompletedChange","checkedKeys","checked","renderTreeNodes","nodes","TreeNode","className","data-mission","actions","handleEdit","handleDelete","handleAdd","Meta","renderMission","hidden","marginRight","marginLeft","dataSource","rowKey","renderItem","parentMission","append","handleShowCompletedChange","setState","missionList","justify","textAlign","Title","checkedChildren","unCheckedChildren","minHeight","span","blockNode","checkStrictly","checkable","onCheck","onSave","onExport","onImport","WrapperComponent","TodoListWithStorage","handleChange","handleSave","jsonStr","convertToJson","localStorage","setItem","handleLoad","rootMissionStr","getItem","createFromJson","handleExport","blob","Blob","a","document","createElement","download","href","window","URL","createObjectURL","dataset","downloadurl","click","handleImportInit","input","accept","addEventListener","file","path","files","fileReader","FileReader","onload","target","result","readAsText","importInput","handleImport","missionMap","App","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a6c613c4.chunk.js","sourcesContent":["// eslint-disable\r\n// Private array of chars to use\r\nconst CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\r\nexport class GuidUtil {\r\n  static uuid = function (len, radix) {\r\n    var chars = CHARS, uuid = [], i;\r\n    radix = radix || chars.length;\r\n\r\n    if (len) {\r\n      // Compact form\r\n      for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix];\r\n    } else {\r\n      // rfc4122, version 4 form\r\n      var r;\r\n\r\n      // rfc4122 requires these characters\r\n      uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\r\n      uuid[14] = '4';\r\n\r\n      // Fill in random data.  At i==19 set the high bits of clock sequence as\r\n      // per rfc4122, sec. 4.1.5\r\n      for (i = 0; i < 36; i++) {\r\n        if (!uuid[i]) {\r\n          r = 0 | Math.random() * 16;\r\n          uuid[i] = chars[(i === 19) ? (r & 0x3) | 0x8 : r];\r\n        }\r\n      }\r\n    }\r\n\r\n    return uuid.join('');\r\n  };\r\n\r\n  // A more performant, but slightly bulkier, RFC4122v4 solution.  We boost performance\r\n  // by minimizing calls to random()\r\n  static uuidFast = function () {\r\n    var chars = CHARS, uuid = new Array(36), rnd = 0, r;\r\n    for (var i = 0; i < 36; i++) {\r\n      if (i === 8 || i === 13 || i === 18 || i === 23) {\r\n        uuid[i] = '-';\r\n      } else if (i === 14) {\r\n        uuid[i] = '4';\r\n      } else {\r\n        if (rnd <= 0x02) rnd = 0x2000000 + (Math.random() * 0x1000000) | 0;\r\n        r = rnd & 0xf;\r\n        rnd = rnd >> 4;\r\n        uuid[i] = chars[(i === 19) ? (r & 0x3) | 0x8 : r];\r\n      }\r\n    }\r\n    return uuid.join('');\r\n  };\r\n\r\n  // A more compact, but less performant, RFC4122v4 solution:\r\n  static uuidCompact = function () {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n      // eslint-disable-next-line\r\n      var r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\r\n      return v.toString(16);\r\n    });\r\n  };\r\n\r\n}\r\n\r\n/**\r\n * 常用工具类\r\n */\r\nexport class Util {\r\n  /**\r\n   * 判断对象是否为空\r\n   * @param {object|array|string} obj 目标对象\r\n   * @param {boolean} [includeNull=true] 是否包含null\r\n   * @param {boolean} [includeUndefined=true] 是否包含undefined\r\n   * @returns {boolean} 为空时返回true\r\n   */\r\n  static isEmpty(obj, includeNull = true, includeUndefined = true) {\r\n    if (!includeNull && obj === null) {\r\n      return false;\r\n    }\r\n    if (!includeUndefined && obj === undefined) {\r\n      return false;\r\n    }\r\n    return obj === null || obj === undefined || Object.keys(obj).length === 0;\r\n  }\r\n}\r\n","import {GuidUtil, Util} from \"../utils\";\r\n\r\nexport const NodeType = {\r\n  root: Symbol.for('rootNode'),\r\n  normal: Symbol.for('normalNode'),\r\n  leaf: Symbol.for('leafNode'),\r\n};\r\n\r\n/**\r\n * 任务\r\n * @param {string} id\r\n * @param {string} title 任务名称\r\n * @param {string} description 任务详细描述\r\n * @param {bool} completed 任务是否完成\r\n * @param {bool} expanded 任务是否展开\r\n * @param {Mission[]} children 子任务\r\n */\r\nexport class Mission{\r\n  id = '';\r\n  title = '';\r\n  description = '';\r\n  completed = false;\r\n  expanded = false;\r\n  children = null;\r\n  parent = null;\r\n  type = NodeType.normal;\r\n\r\n  constructor(title) {\r\n    this.id = GuidUtil.uuid(); // guid\r\n    this.title = title;\r\n  }\r\n}\r\n\r\nexport class RootMission extends Mission{\r\n\r\n  type = NodeType.root;\r\n\r\n  constructor() {\r\n    super('root node');\r\n    this.children = [];\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n * 修改子节点的父节点指针为当前父节点\r\n * @param {Mission} parentNode\r\n * @returns {Mission}\r\n */\r\nfunction redirectParentPointer(parentNode){\r\n  parentNode.children.forEach(node=>{\r\n    node.parent = parentNode;\r\n  });\r\n  return parentNode;\r\n}\r\n\r\n/**\r\n * 任务相关工厂方法\r\n */\r\nexport class MissionFactory{\r\n  /**\r\n   * 复制\r\n   * @param mission\r\n   * @returns {Mission}\r\n   */\r\n  static clone(mission){\r\n    switch(mission.type){\r\n      case NodeType.root:{\r\n        return Object.assign(new RootMission(),mission);\r\n      }\r\n      default:{\r\n        return Object.assign(new Mission(),mission);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 添加任务\r\n   * @param parentNode\r\n   * @param mission\r\n   * @returns\r\n   * 返回新的父节点，并将原来此父节点下的所有子节点的父节点指针修改为新的父节点\r\n   */\r\n  static append(parentNode,mission){\r\n\r\n    const targetParentNode = MissionFactory.clone(parentNode);\r\n    if(targetParentNode.children){\r\n      // 子节点已存在\r\n      targetParentNode.children = [...targetParentNode.children,mission];\r\n    }else{\r\n      // 子节点不存在\r\n      targetParentNode.children = [mission];\r\n    }\r\n    // 重写父节点指针指向新的父节点\r\n    redirectParentPointer(targetParentNode);\r\n    return targetParentNode;\r\n  }\r\n\r\n  /**\r\n   * 修改任务\r\n   * @param parentNode\r\n   * @param mission\r\n   */\r\n  static update(parentNode,mission){\r\n    // 修改目标节点为修改后的节点\r\n    const targetParentNode = MissionFactory.clone(parentNode);\r\n    targetParentNode.children = parentNode.children.map(node=>{\r\n      if(node.id === mission.id){\r\n        return mission;\r\n      }else{\r\n        return node;\r\n      }\r\n    });\r\n\r\n    // 如果子节点还有子节点，则更新子节点的父节点指针指向新生成的子节点\r\n    if(!Util.isEmpty(mission.children)){\r\n      mission.children.forEach(item=>{\r\n        item.parent = mission;\r\n      })\r\n    }\r\n\r\n    // 重写父节点指针指向新的父节点\r\n    redirectParentPointer(targetParentNode);\r\n    return targetParentNode;\r\n  }\r\n\r\n  /**\r\n   * 删除任务\r\n   * @param parentNode\r\n   * @param mission\r\n   */\r\n  static delete(parentNode,mission){\r\n    const targetParentNode = MissionFactory.clone(parentNode);\r\n    targetParentNode.children = parentNode.children.filter(node=>{\r\n      return node.id !== mission.id;\r\n    });\r\n\r\n    // 重写父节点指针指向新的父节点\r\n    redirectParentPointer(targetParentNode);\r\n    return targetParentNode;\r\n  }\r\n\r\n  /**\r\n   * 刷新目标节点\r\n   * @param {Mission} parentNode\r\n   * @param {Mission} node\r\n   */\r\n  static refreshNode(parentNode,node){\r\n    let pointer = node;\r\n    while(true){\r\n      const tempParentNode = pointer.parent;\r\n      if(tempParentNode === parentNode){\r\n        break;\r\n      }\r\n\r\n      if(tempParentNode.type === NodeType.root){\r\n        throw new Error('无效的父节点');\r\n      }\r\n\r\n      pointer = tempParentNode;\r\n    }\r\n\r\n\r\n    if(node.parent === parentNode){\r\n      return MissionFactory.update(node.parent,node);\r\n    }else{\r\n      const tempNode = MissionFactory.update(node.parent,node);\r\n      return MissionFactory.refreshNode(parentNode,tempNode);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 转为json\r\n   * @param mission\r\n   * @returns {string}\r\n   */\r\n  static convertToJson(mission) {\r\n    const data = convertMissionToData(mission);\r\n    return JSON.stringify(data);\r\n  }\r\n\r\n  /**\r\n   * 从json创建Mission\r\n   * @param json\r\n   * @returns {Mission}\r\n   */\r\n  static createFromJson(json){\r\n    const data = JSON.parse(json);\r\n    const mission = convertDataToMission(data);\r\n    return mission;\r\n  }\r\n\r\n  /**\r\n   * 解析附加信息\r\n   * @param {Mission} mission\r\n   * @returns\r\n   * {\r\n   *   completedKeys: [], // 完成的任务ID\r\n   *   expandedKeys: [], // 展开的任务ID\r\n   * }\r\n   */\r\n  static parseExtraInfo(mission) {\r\n    const extraInfo = {\r\n      completedKeys: new Set(),\r\n      expandedKeys: new Set(),\r\n    };\r\n    if(mission.completed){\r\n      extraInfo.completedKeys.add(mission.id);\r\n    }\r\n    if(mission.expanded){\r\n      extraInfo.expandedKeys.add(mission.id);\r\n    }\r\n    if(!Util.isEmpty(mission.children)){\r\n      mission.children.forEach(mission=>{\r\n        const {completedKeys,expandedKeys} = MissionFactory.parseExtraInfo(mission);\r\n        [...completedKeys].forEach(key=>{\r\n          extraInfo.completedKeys.add(key);\r\n        });\r\n        [...expandedKeys].forEach(key=>{\r\n          extraInfo.expandedKeys.add(key);\r\n        });\r\n      })\r\n    }\r\n    return extraInfo;\r\n  }\r\n}\r\n\r\n/**\r\n * 将Mission转为纯数据对象\r\n * @param mission\r\n * @returns {object}\r\n */\r\nfunction convertMissionToData(mission){\r\n  // 常规字段赋值\r\n  const {parent,children,type,...data} = mission;\r\n\r\n  // type赋值\r\n  data.type = Symbol.keyFor(type);\r\n\r\n  // children赋值\r\n  if(children){\r\n    data.children = children.map(item=>{\r\n      return convertMissionToData(item);\r\n    })\r\n  }else{\r\n    data.children = null;\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\n/**\r\n * 将纯数据对象转为Mission\r\n * @param data\r\n * @param {Mission} [parent=null] 父节点，默认为空\r\n * @returns {Mission}\r\n */\r\nfunction convertDataToMission(data,parent=null){\r\n  // 常规赋值\r\n  const {type,children,...missionData} = data;\r\n\r\n  let mission;\r\n  switch(Symbol.for(type)){\r\n    case NodeType.root: {\r\n      mission = new RootMission();\r\n      break;\r\n    }\r\n    default:{\r\n      mission = new Mission();\r\n    }\r\n  }\r\n  Object.assign(mission,missionData);\r\n\r\n  // type赋值\r\n  mission.type = Symbol.for(type);\r\n\r\n  // children赋值\r\n  if(children){\r\n    mission.children = children.map(item=>{\r\n      return convertDataToMission(item,mission);\r\n    })\r\n  }else{\r\n    mission.children = null;\r\n  }\r\n\r\n  // parent赋值\r\n  mission.parent = parent;\r\n\r\n  return mission;\r\n}\r\n","import React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport {Mission} from \"../model/Mission\";\r\nimport {Button, Form, Input} from \"antd\";\r\n\r\nconst EditType = {\r\n  insert: Symbol.for('insert'),\r\n  update: Symbol.for('update'),\r\n  delete: Symbol.for(\"delete\"),\r\n};\r\nclass MissionEditor extends React.Component{\r\n\r\n  static propTypes = {\r\n    mission: PropTypes.instanceOf(Mission),\r\n    onChange: PropTypes.func.isRequired,\r\n    onCancel: PropTypes.func.isRequired,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.mission = this.props.mission || new Mission('');\r\n    this.editType = this.props.mission ? EditType.update : EditType.insert\r\n  }\r\n\r\n  handleSubmit = (event) =>{\r\n    event.preventDefault();\r\n    this.props.form.validateFields((errors, values) => {\r\n      if(!errors){\r\n        const mission = {...this.mission,...values};\r\n\r\n        // 返回修改后的mission\r\n        this.props.onChange(mission);\r\n      }\r\n    })\r\n  };\r\n\r\n  render() {\r\n    const {getFieldDecorator} = this.props.form;\r\n    let {mission} = this;\r\n    return (\r\n      <Form onSubmit={this.handleSubmit}>\r\n        <Form.Item label={\"任务ID\"}>\r\n          {getFieldDecorator('id',{\r\n            initialValue: mission.id,\r\n          })(<Input readOnly/>)}\r\n        </Form.Item>\r\n        <Form.Item label=\"任务名称\">\r\n          {getFieldDecorator('title',{\r\n            initialValue: mission.title,\r\n            rules: [\r\n              {required: true,message:'请输入任务名称'}\r\n            ]\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item label=\"任务详情\">\r\n          {getFieldDecorator('description',{\r\n            initialValue: mission.description\r\n          })(<Input />)}\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Button type=\"primary\" htmlType=\"submit\" block>{formatButtonText(this.editType)}</Button>\r\n          <Button type=\"default\" block onClick={this.props.onCancel}>取消</Button>\r\n        </Form.Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\n/**\r\n * 格式化按钮文字\r\n * @param editType\r\n */\r\nfunction formatButtonText(editType){\r\n  switch(editType){\r\n    case EditType.update:{\r\n      return '修改';\r\n    }\r\n    case EditType.insert:{\r\n      return '新增';\r\n    }\r\n    default: {\r\n      return '保存';\r\n    }\r\n  }\r\n}\r\n\r\nconst WrappedMissionEditor = Form.create()(MissionEditor);\r\nWrappedMissionEditor.propTypes = MissionEditor.propTypes;\r\n\r\nexport default WrappedMissionEditor;\r\n","import React from 'react';\r\nimport * as PropTypes from 'prop-types';\r\nimport {Row, Col, Typography, List, Button, Modal, Tree, Checkbox, Switch} from 'antd';\r\nimport {MissionFactory, NodeType, RootMission} from \"../model/Mission\";\r\nimport MissionEditor from \"./MissionEditor\";\r\n\r\nimport './TodoList.css';\r\nimport {Util} from \"../utils\";\r\n\r\nexport default class TodoList extends React.Component{\r\n  static propTypes = {\r\n    rootMission: PropTypes.instanceOf(RootMission).isRequired,\r\n    onChange: PropTypes.func.isRequired, // 数据变化\r\n    onSave: PropTypes.func.isRequired, // 保存\r\n    onImport: PropTypes.func.isRequired, // 导入\r\n    onExport: PropTypes.func.isRequired, // 导出\r\n  };\r\n\r\n  state = {\r\n    showCompleted: false\r\n  };\r\n\r\n  openEditor = (mission) => {\r\n    const promise = new Promise((resolve)=>{\r\n      const modal = Modal.info({\r\n        icon: null,\r\n        okButtonProps: {style:{display: 'none'}},\r\n        content: (\r\n          <MissionEditor\r\n            mission={mission}\r\n            onChange={(mission)=>{resolve(mission);modal.destroy();}}\r\n            onCancel={()=>{modal.destroy()}}\r\n          />\r\n        )\r\n      });\r\n    });\r\n    const editor = {\r\n      onChange: (callback) => {\r\n        promise.then((mission)=>{\r\n          callback(mission);\r\n        })\r\n      }\r\n    };\r\n    return editor;\r\n  };\r\n\r\n  refreshNode = (node) => {\r\n    const rootNode = this.props.rootMission;\r\n    if(node.type === NodeType.root){\r\n      this.props.onChange(node);\r\n    }else{\r\n      this.props.onChange(MissionFactory.refreshNode(rootNode,node));\r\n    }\r\n\r\n  };\r\n\r\n  handleCompletedChange = (checkedKeys,event) => {\r\n    const checked = event.checked;\r\n    const mission = event.node.props['data-mission'];\r\n    this.refreshNode(Object.assign(MissionFactory.clone(mission),{completed:checked}));\r\n  };\r\n\r\n  /**\r\n   * 渲染树节点\r\n   * @param {Mission[]} nodes\r\n   * @returns {*}\r\n   */\r\n  renderTreeNodes = (nodes) => {\r\n    const {showCompleted} = this.state;\r\n    if(nodes){\r\n      return nodes.map( mission => {\r\n        return (\r\n          <Tree.TreeNode\r\n            className=\"treeNode\"\r\n            style={!showCompleted&&mission.completed?{display:'none'}:{}}\r\n            key={mission.id}\r\n            data-mission={mission}\r\n            title={(\r\n              <ol>\r\n                <List.Item className=\"mission\" actions={[<Button className=\"btn-hidden\" onClick={()=>{this.handleEdit(mission)}}>编辑</Button>,<Button className=\"btn-hidden\" onClick={()=>{this.handleDelete(mission)}}>删除</Button>,<Button className=\"btn-hidden\" onClick={()=>{this.handleAdd(mission)}}>添加</Button>]}>\r\n                  <List.Item.Meta title={mission.title} description={mission.description} />\r\n                </List.Item>\r\n              </ol>\r\n            )}\r\n          >\r\n            {!Util.isEmpty(mission.children) && this.renderTreeNodes(mission.children)}\r\n          </Tree.TreeNode>\r\n        )\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * 渲染列表节点\r\n   * @param {Mission} mission\r\n   * @returns {*}\r\n   */\r\n  renderMission = (mission) => {\r\n    const {showCompleted} = this.state;\r\n    // TODO button传递mission存在效率问题，待优化\r\n    return (\r\n      <>\r\n        <List.Item hidden={!showCompleted&&mission.completed} className=\"mission\" actions={[<Button className=\"btn-hidden\" onClick={()=>{this.handleEdit(mission)}}>编辑</Button>,<Button className=\"btn-hidden\" onClick={()=>{this.handleDelete(mission)}}>删除</Button>,<Button className=\"btn-hidden\" onClick={()=>{this.handleAdd(mission)}}>添加</Button>]}>\r\n          <Checkbox checked={mission.completed} onChange={this.handleCompletedChange} data-mission={mission} style={{marginRight: '20px'}}/>\r\n          <List.Item.Meta title={mission.title} description={mission.description} />\r\n        </List.Item>\r\n        {mission.children && Object.keys(mission.children).length > 0 && <List style={{marginLeft: '20px'}} dataSource={mission.children} rowKey={(mission)=>mission.id} renderItem={(mission)=>{\r\n          return this.renderMission(mission);\r\n        }} />}\r\n      </>\r\n    )\r\n  };\r\n\r\n  /**\r\n   * 编辑Mission\r\n   * @param mission\r\n   */\r\n  handleEdit = (mission) => {\r\n    this.openEditor(mission).onChange((mission)=>{\r\n      this.refreshNode(mission);\r\n    })\r\n  };\r\n\r\n  /**\r\n   * 删除mission\r\n   * @param mission\r\n   */\r\n  handleDelete = (mission) => {\r\n    this.refreshNode(MissionFactory.delete(mission.parent,mission));\r\n  };\r\n\r\n  /**\r\n   * 添加子mission\r\n   * @param {Mission} parentMission\r\n   */\r\n  handleAdd = (parentMission) => {\r\n    this.openEditor().onChange((mission)=>{\r\n      this.refreshNode(MissionFactory.append(parentMission,mission));\r\n    });\r\n  };\r\n\r\n  handleShowCompletedChange = (showCompleted) => {\r\n    this.setState({showCompleted});\r\n  };\r\n\r\n  render() {\r\n    const missionList = this.props.rootMission.children;\r\n    const {completedKeys,expandedKeys} = MissionFactory.parseExtraInfo(this.props.rootMission);\r\n    return (\r\n      <>\r\n        <Row type=\"flex\" justify=\"center\">\r\n          <Col style={{textAlign:'center'}}>\r\n            <Typography.Title>I CAN DO</Typography.Title>\r\n            <Switch checkedChildren=\"显示已完成\" unCheckedChildren=\"隐藏已完成\" checked={this.state.showCompleted} onChange={this.handleShowCompletedChange}/>\r\n          </Col>\r\n        </Row>\r\n        <Row type=\"flex\" justify=\"space-around\" style={{minHeight: '50vh'}}>\r\n          <Col span={16}>\r\n            <Tree blockNode checkStrictly checkable checkedKeys={[...completedKeys]} onCheck={this.handleCompletedChange}>\r\n              {this.renderTreeNodes(missionList)}\r\n            </Tree>\r\n          </Col>\r\n          <Col span={10}>\r\n            <Button type=\"primary\" block onClick={()=>{this.handleAdd(this.props.rootMission)}}>add mission</Button>\r\n          </Col>\r\n        </Row>\r\n        <Row type=\"flex\" justify=\"center\">\r\n          <Col span={4}>\r\n            <Button type=\"default\" block onClick={this.props.onSave}>save</Button>\r\n          </Col>\r\n          <Col span={4}>\r\n            <Button type=\"default\" block onClick={this.props.onExport}>export</Button>\r\n          </Col>\r\n          <Col span={4}>\r\n            <Button type=\"default\" block onClick={this.props.onImport}>import</Button>\r\n          </Col>\r\n        </Row>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\n","import React from 'react';\r\nimport {MissionFactory, RootMission} from \"../model/Mission\";\r\n\r\nexport default function connectStorage(WrapperComponent){\r\n  return class Storage extends React.Component{\r\n\r\n    constructor(props){\r\n      super(props);\r\n      const rootMission = new RootMission();\r\n      this.state = {\r\n        rootMission: rootMission,\r\n        // TODO 增加missionMap，handleChange改为处理单个Mission，业务逻辑移到存储来处理\r\n        missionMap: {\r\n          [rootMission.id]: rootMission\r\n        }\r\n      };\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.handleImportInit();\r\n      this.handleLoad();\r\n    }\r\n\r\n    handleChange = (rootMission) => {\r\n      this.setState({\r\n        rootMission\r\n      })\r\n    };\r\n\r\n    handleSave = () => {\r\n      const jsonStr = MissionFactory.convertToJson(this.state.rootMission);\r\n      localStorage.setItem(\"rootMission\",jsonStr);\r\n      return Promise.resolve(jsonStr);\r\n    };\r\n\r\n    handleLoad = () => {\r\n      const rootMissionStr = localStorage.getItem(\"rootMission\");\r\n      if(rootMissionStr){\r\n        const rootMission = MissionFactory.createFromJson(rootMissionStr);\r\n        this.setState({\r\n          rootMission\r\n        })\r\n      }\r\n    };\r\n\r\n    handleExport = () => {\r\n      // 先保存\r\n      this.handleSave().then((jsonStr)=>{\r\n        const filename = 'icando.json';\r\n        const blob = new Blob([jsonStr],{type:'text/json'});\r\n        const a = document.createElement('a');\r\n        a.download = filename;\r\n        a.href = window.URL.createObjectURL(blob);\r\n        a.dataset.downloadurl = ['text/json', a.download, a.href].join(':');\r\n        a.click();\r\n      });\r\n    };\r\n\r\n    handleImportInit = () => {\r\n      const input = document.createElement('input');\r\n      input.type = 'file';\r\n      input.accept = '.json';\r\n      input.addEventListener('change',(event)=>{\r\n        const file = event.path[0].files.item(0);\r\n        const fileReader = new FileReader();\r\n        fileReader.onload = (event)=>{\r\n          const jsonStr = event.target.result;\r\n          const rootMission = MissionFactory.createFromJson(jsonStr);\r\n          this.setState({\r\n            rootMission\r\n          });\r\n        };\r\n        fileReader.readAsText(file);\r\n      });\r\n\r\n      this.importInput = input;\r\n    };\r\n\r\n    handleImport = () => {\r\n      this.importInput.click();\r\n    };\r\n\r\n    render() {\r\n      const {rootMission} = this.state;\r\n      return <WrapperComponent\r\n        {...this.props}\r\n        rootMission={rootMission}\r\n        onChange={this.handleChange}\r\n        onSave={this.handleSave}\r\n        onExport={this.handleExport}\r\n        onImport={this.handleImport}\r\n      />\r\n    }\r\n  }\r\n}\r\n\r\nexport const ChangeType = {\r\n  insert: Symbol.for('insert'),\r\n  update: Symbol.for('update'),\r\n  delete: Symbol.for('delete'),\r\n};\r\n","import React from 'react';\r\nimport './App.css';\r\nimport TodoList from \"./modules/TodoList\";\r\nimport connectStorage from \"./modules/Storage\";\r\n\r\n// 与存储连接，后续可以改为redux\r\nconst TodoListWithStorage = connectStorage(TodoList);\r\n\r\nfunction App() {\r\n  return (\r\n    <TodoListWithStorage />\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}